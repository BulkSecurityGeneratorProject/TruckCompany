<h3>Route list for waybill â„– {{vm.waybill.number}} ({{vm.waybill.date | date:'dd/MM/yy HH:mm'}})</h3>
<div class="panel panel-default">
    <div class="panel-body">
        <ng-map ng-if="render" center="[53, 25]" zoom="5">
            <directions
                draggable="false"
                travel-mode="DRIVING"
                waypoints={{vm.wayPoints}}
                origin="{{vm.waybill.routeList.leavingStorage.address}}"
                destination="{{vm.waybill.routeList.arrivalStorage.address}}">
            </directions>
        </ng-map>
    </div>
</div>

<form role="form" name="form">
    <div class="row">
        <div class="col-sm-1">
        </div>
        <div class="col-md-5">
            <div class="form-group"
                 ng-class="{'has-error' : (form.origin.$dirty && form.origin.$invalid) }">
                <label for="origin" class="control-label">Origin:</label>
                <input type="text" id="origin" class="form-control" name="origin"
                       ng-change="calcDistance()"
                       ng-model="vm.waybill.routeList.leavingStorage.address"
                       required>
            </div>
            <div class="form-group"
                 ng-class="{'has-error' : (form.destination.$dirty && form.destination.$invalid) }">
                <label for="destination" class="control-label">Destination:</label>
                <input type="text" id="destination" class="form-control"
                       name="destination"
                       ng-change="calcDistance()"
                       ng-model="vm.waybill.routeList.arrivalStorage.address"
                       required>
            </div>
            <div class="form-group"
                 ng-class="{'has-error' : (form.fuelCost.$dirty && form.fuelCost.$invalid) }">
                <label for="fuelCost" class="control-label">Fuel cost $:</label>
                <input ng-model="vm.waybill.routeList.fuelCost"
                       type="text" id="fuelCost"
                       name="fuelCost"
                       class="form-control"
                       required>
            </div>
            <h4>Total distance: {{vm.dist}} km</h4>
        </div>
        <div class="col-sm-1">
        </div>
        <div class="col-md-5">
            <label ng-if="wayPoints.length != 0" class="control-label">Waypoints:</label>
            <fieldset data-ng-repeat="wayPoint in wayPoints">
                <div class="form-group form-inline">
                    <input class="form-control" type="text" ng-model="wayPoint.location" name="''"
                           ng-change="calcDistance()"
                           placeholder="Enter checkpoint">
                    <button ng-if="vm.waybill.routeList.state == 'UNCHECKED'"
                            class="btn-small btn-danger" ng-show="$last" ng-click="removeWayPoint()"><span
                        class="glyphicon glyphicon-minus"></span></button>
                </div>
            </fieldset>
            <button ng-if="vm.waybill.routeList.state == 'UNCHECKED'" class="btn btn-default"
                    ng-click="addNewWayPoint()">Add waypoints
            </button>
        </div>
    </div>
    <button ng-if="vm.waybill.routeList.state == 'UNCHECKED'"
            class="btn btn-success pull-right"
            ng-disabled="form.$invalid"
            ng-click="vm.confirmRoutelist()">Confirm
    </button>
</form>
